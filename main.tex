\documentclass[titlepage]{ltjsreport}

\input{src/macro.tex}
\usepackage{epigraph}

\usepackage[subpreambles=true,sort=true]{standalone}
\usepackage{tikz}

\usepackage{amssymb}
\usepackage[colorlinks=true]{hyperref}

\usepackage{amsthm}
\usepackage{thmbox}
\newtheorem[S]{theorem}{定理}[chapter]
\newtheorem[S]{definition}[theorem]{定義}
\newtheorem[S]{example}[theorem]{例}

\usepackage{proof}
\renewcommand{\proofname}{\textbf{証明}}

\usepackage{enumitem}

\usepackage{cleveref}
\crefname{theorem}{}{}

\title{圏論ノート}
\author{大原玄嗣}

\begin{document}
\maketitle

\chapter{圏・函手・自然変換}

\section{圏}

射は，圏という世界における関係を表す矢印であり，
圏論において対象は矢印の始まりと終わりにつけられる名称に過ぎず，
対象のもつ性質は射によってのみ特徴づけられる．

\begin{definition}[圏]\label{def:category}
  \def\a{\obj{a}}%
  \def\b{\obj{b}}%
  圏 (category) は，対象 (object) と射 (arrow, morphism) の集まりからなり，
  以下を満たす．
  \begin{itemize}
    \item 任意の射は，域 (domain) と余域 (codomain) と呼ばれる対象をもつ．
          射 $f$ の域を$\dom(f)$，余域を $\cod(f)$ と表記する．
          また，$\dom(f)=\a$，$\cod(f)=\b$ であるとき
          $\mrp{f}{\a}{\b}$ と表記する．
    \item 任意の射 $f,g$ について，$\cod(f)=\dom(g)$ ならば，
          $f,g$ の合成 (composition) $g\circ f$ が一意に存在する．
    \item 任意の射 $f,g,h$ について，
          $\cod(f)=\dom(g)$ かつ $\cod(g)=\dom(h)$ ならば，
          $h\circ(g\circ f)=(h\circ g)\circ f$ が成り立つ．
    \item 任意の対象 $\a$ について恒等射 (identity)
          $\mrp{\id{\a}}{\a}{\a}$ が一意に存在し，
          任意の射 $\mrp{f}{\a}{\b}$ について
          $f\circ\id{\a}=\id{\b}\circ f=f$ が成り立つ．
  \end{itemize}
  また，圏 $\cat{C}$ の対象の集まりを $\objs{\cat{C}}$，
  射 $\a\to\b$ の集まりを $\mrps{\cat{C}}{\a}{\b}$ と表記する．
\end{definition}

\begin{figure}[htbp]
  \centering
  \includestandalone{src/category}
  \caption{圏の例}
\end{figure}

\begin{definition}[逆射]
  \def\a{\obj{a}}%
  \def\b{\obj{b}}%
  射 $\mrp{f}{\a}{\b}$ について以下を満たす射 $\mrp{g}{\b}{\a}$ を
  $f$ の逆射 (inverse) といい，
  $f^{-1}$ と表記する:
  \begin{equation}
    g\circ f=\id{\a}\wedge f\circ g=\id{\b}.
  \end{equation}
\end{definition}

\begin{theorem}[逆射の一意性]
  任意の射について，逆射は高々1つである．
\end{theorem}

\begin{proof}
  \def\a{\obj{a}}%
  \def\b{\obj{b}}%
  射 $\mrp{f}{\a}{\b}$ の相異なる逆射 $\mrp{g,h}{\b}{\a}$ が存在すると仮定する．
  \begin{equation*}
    g=g\circ\id{\b}=g\circ(f\circ h)=(g\circ f)\circ h=\id{\a}\circ h=h.
  \end{equation*}
  これは仮定に矛盾し，定理は示された．
\end{proof}

\begin{definition}[同型射]
  射 $f$ について逆射 $f^{-1}$ が存在するとき，
  $f$ は同型射 (isomorphism) であるという．
\end{definition}

対象は性質をもたないため，
対象どうしの「本質的な等しさ」なるものも射によって定められる．

\begin{definition}[同型]
  \def\a{\obj{a}}%
  \def\b{\obj{b}}%
  圏 $\cat{C}$ の対象 $\a,\b$ について同型射 $\a\to\b$ が存在するとき，
  $\a$ と $\b$ は同型 (isomorphic) であるといい，$\a\simeq\b$ と表記する．
\end{definition}

\subsection{圏の大きさ}

\begin{definition}[局所小圏]
  \def\C{\cat{C}}%
  \def\a{\obj{a}}%
  \def\b{\obj{b}}%
  圏 $\C$ の任意の対象 $\a,\b\in\C$ について
  $\mrps{\C}{\a}{\b}$ が小さい集合 (\cref{def:small-set}) であるとき，
  $\C$ を局所小圏 (locally small category) という．
\end{definition}

\subsection{集合圏}

前述のとおり，圏論では対象そのものが既に何らかの性質を備えているとは考えない．
むしろ対象の「性質」とは他の対象との関係性によって初めて問題にできるものだ．

素朴な集合論においては，
まず集合が要素をもち，それらの対応づけとして集合間の写像が定義される．
圏論はその逆をいく．「集合」という何かの間に写像を定めてしまい，
それによって初めて集合の要素を定義する．

\begin{definition}[集合圏]
  集合圏は，任意の集合を対象とし，それらの間の任意の写像を射とする圏である．
\end{definition}

\section{函手}

2つの世界 (圏) を比較したときに，世界を構成する要素は全く違っていても，
それらの関係性に着目するとなんとなく似ている気がしてくることがある．
函手はそのようなアナロジーを表現する矢印である．
\begin{definition}[函手]
  \def\a{\obj{a}}%
  \def\b{\obj{b}}%
  2つの圏 $\cat{C},\cat{D}$ の対象から対象へ，射から射へ対応づける写像
  $\mrp{F}{\cat{C}}{\cat{D}}$ が以下の条件を満たすとき，
  $F$ を函手 (functor) という．
  \begin{itemize}
    \item $F(\a\to\b)=F(\a)\to F(\b)$,
    \item $F(\id{\a})=\id{F(\a)}$,
    \item $F(g\circ f)=F(g)\circ F(f)$.
  \end{itemize}
\end{definition}
すなわち函手は域と余域，恒等射と射の合成を保存する写像である．
のちに「圏の圏」なるものを考えるが，
そこでは圏が対象として，函手が射として扱われることになる
(これが\cref{def:category}を満たすことは容易に確認できる)．

\section{自然変換}

2つの世界 (圏) について異なるアナロジーを考えることもできる．
すると，異なるアナロジーの間にも何らかのアナロジーが見えてくることがある．
この高次のアナロジーが自然変換である．

\begin{definition}[自然変換]
  \def\x{\obj{x}}%
  \def\y{\obj{y}}%
  2つの函手 $F:\cat{C}\to\cat{D},G:\cat{C}\to\cat{D}$ について，
  $\cat{C}$ の対象 $\x$ を $\cat{D}$ の射 $t_{\x}:F(\x)\to G(\x)$ に対応づける
  写像 $t$ が
  \begin{equation}
    \forall\x,\y\ \forall\mrp{f}{\x}{\y}\ G(f)\circ t_{\x}=t_{\y}\circ F(f)
  \end{equation}
  を満たすとき，$t$ を自然変換 (natural transformation) といい，
  $\mrp{t}{F}{G}$ と表記する．
\end{definition}

\chapter{表現可能函手}

\section{表現可能函手}

はじめに hom 函手の概念を導入する．
hom 函手は，あるひとつの対象に着目して
そこから見た「主観的な」圏を与える函手である．
共変 hom 函手は他の対象を「そこへの」射の集合と同一視し，
反変 hom 函手は他の対象を「そこからの」射の集合と同一視する．
\begin{definition}[hom 双函手]
  \def\C{\cat{C}}%
  局所小圏 $\C$ について，
  双函手 $\mrp{\C(-,-)}{\op{\C}\times\C}{\set}$
  を hom 双函手 (hom-bifunctor) という．
  ただし $\mrps{\C}{-}{-}$ は
  \begin{itemize}
    \item $a,b\in\C$ を集合 $\mrps{\C}{a}{b}\in\set$ に写し，
    \item $\psi\in\mrps{\C}{a}{a'},\phi\in\mrps{\C}{b}{b'}$
          を以下の写像に写す．
          \begin{equation}
            \mrps{\C}{a'}{b}\in f\mapsto\phi\circ f\circ\psi\in\mrps{\C}{a}{b'}
          \end{equation}
  \end{itemize}
\end{definition}
\begin{definition}[共変 hom 函手]
  \def\C{\cat{C}}%
  \def\c{\obj{c}}%
  局所小圏 $\C$ と対象 $\c\in\objs{\C}$ について，
  hom 双函手の部分適用 $\mrp{\mrps{\C}{\c}{-}}{\C}{\set}$ を
  $\c$ に関する共変 hom 函手 (covariant hom-functor) という．
\end{definition}
\begin{definition}[反変 hom 函手]
  \def\C{\cat{C}}%
  \def\c{\obj{c}}%
  局所小圏 $\C$ と対象 $\c\in\objs{\C}$ について，
  hom 双函手の部分適用 $\mrp{\mrps{\C}{-}{\c}}{\op{\C}}{\set}$ を
  $\c$ に関する反変 hom 函手 (contravariant hom-functor) という．
\end{definition}
表現可能函手とは hom 函手に同型な函手のことである．

\begin{definition}[表現可能函手]
  \def\C{\cat{C}}%
  \def\c{\obj{c}}%
  \def\K{K}%
  局所小圏 $\C$ 上の集合値函手 $\mrp{\K}{\C}{\set}$ と
  ある対象 $\c\in\objs{\C}$ に関する共変 hom 函手 $\mrps{\C}{\c}{-}$ について
  自然同型
  \begin{equation}
    \psi:\mrps{\C}{\c}{-}\cong\K
  \end{equation}
  が存在するとき，
  $\K$ は表現可能 (representable) であるという．
  またこのとき，組 $(\c,\psi)$ を $\K$ の表現 (representation) といい，
  $\c$ を $\K$ の表現対象 (representing object) という．
\end{definition}

\section{米田の補題}

所与の集合値函手 $\mrp{K}{\cat{D}}{\set}$ に対して
表現可能函手 $\mrps{\cat{D}}{r}{-}$ からの自然変換 $\alpha$ を与えることは，
コンポーネント $\alpha_r$ が恒等射 $\id{r}$
をどこに写すかを決めることと等価である．
以下で紹介する米田の補題 (Yoneda lemma) はその事実を主張しており，
$\alpha_r(\id{r})$ の値ひとつから自然変換 $\alpha$ を構成する方法を提供する．

\begin{theorem}[米田の補題]
  \def\c{\obj{c}}%
  \def\d{\obj{d}}%
  \def\r{\obj{r}}%
  $\cat{D}$ を局所小圏とする．
  任意の $\mrp{K}{\cat{D}}{\set}$ と $\d\in\objs{\cat{D}}$ について
  \begin{equation}
    y:\set^\cat{D}(\mrps{\cat{D}}{\r}{-},K)\ni\alpha\mapsto\alpha_r(\id{\r})\in K(\r)
  \end{equation}
  は全単射である．
\end{theorem}

\begin{proof}
  \def\a{\obj{a}}%
  \def\d{\obj{d}}%
  \def\r{\obj{r}}%
  $\mrp{x}{K(r)}{\set^\cat{D}(\mrps{\cat{D}}{r}{-},K)}$ を考え，
  $x$ が $\set$ における $y$ の逆射であることを示す．
  ただし $x$ は任意の $\a\in K(r)$ を以下のコンポーネントで構成される自然変換
  $x(\a)$ に写す:
  \begin{equation}
    {x(\a)}_{\d}:f\mapsto K(f)(\a).
  \end{equation}
  $y\circ x=\id{K(\r)}$ を示す．任意の $\a\in K(\r)$ について
  \begin{align*}
    y(x(\a)) & ={x(\a)}_{\r}(\id{\r}) \\
             & =K(\id{\r})(\a)        \\
             & =\id{K(\r)}(\a)        \\
             & =\a.
  \end{align*}
  $x\circ y=\id{\set^\cat{D}(\mrps{\cat{D}}{\r}{-},K)}$ を示す．
  任意の $\alpha:\mrps{\cat{D}}{\r}{\d}\to K$，$\d\in\objs{\cat{D}}$，
  $\mrp{f}{\r}{\d}$ について
  \begin{align*}
    {x(y(\alpha))}_{\d}(f) & =K(f)(y(\alpha))                             \\
                           & =K(f)(\alpha_{\r}(\id{\r}))                  \\
                           & =\alpha_{\d}(\mrps{\cat{D}}{\r}{f}(\id{\r})) \\
                           & =\alpha_{\d}(f).
  \end{align*}
  ここで 3 行目の変換には，以下の図式が可換である事実を用いた．
  \begin{figure}[h]
    \centering
    \includestandalone{src/yoneda}
  \end{figure}
  よって $y$ は全単射であることが示された．
\end{proof}

\section{米田埋め込み}

\begin{definition}[米田埋め込み]
  \def\C{\cat{C}}%
  \def\Y{\textbf{よ}}%
  局所小圏 $\C$ について，
  hom 双函手 $\mrp{\C(-,-)}{\op{\C}\times\C}{\set}$ の左カリー化
  $\mrp{\Y}{\C}{\set^{\op{\C}}}$ を米田埋め込み (Yoneda embedding) という．
  \begin{center}
    \includestandalone{src/yoneda-embedding}
  \end{center}
\end{definition}
\begin{definition}[余米田埋め込み]
  \def\C{\cat{C}}%
  \def\Y{\textbf{よ}}%
  局所小圏 $\C$ について，
  hom 双函手 $\mrp{\C(-,-)}{\op{\C}\times\C}{\set}$ の右カリー化
  $\mrp{\Y'}{\op{\C}}{\set^{\C}}$ を余米田埋め込み (coYoneda embedding) という．
  \begin{center}
    \includestandalone{src/coyoneda-embedding}
  \end{center}
\end{definition}

\begin{theorem}[米田埋め込みは充満忠実]
  \def\C{\cat{C}}%
  \def\Y{\textbf{よ}}%
  任意の局所小圏 $\C$ において
  米田埋め込み $\mrp{\Y}{\C}{\set^{\op{\C}}}$ は充満忠実である．
\end{theorem}

\section{米田の補題の系}

\begin{theorem}[Cayley の定理]
  任意の群 $G$ は，対称群 $\operatorname{Sym}(G)$ の部分群と同型である．
\end{theorem}

\chapter{極限}

\section{普遍射}

\begin{definition}[普遍射-1]
  \def\c{\obj{c}}%
  \def\d{\obj{d}}%
  \def\r{\obj{r}}%
  函手 $\mrp{S}{\cat{C}}{\cat{D}}$ と対象 $\c\in\objs{\cat{C}}$ について，
  対象 $\r\in\objs{\cat{D}}$ と射 $\mrp{v}{S(r)}{\c}$ の組 $(\r,v)$ が
  \begin{equation}
    \forall\d\in\objs{\cat{D}}\ \forall f\in\mrps{\cat{C}}{S(d)}{\c}
    \ \exists!f'\in\mrps{\cat{D}}{\d}{\r};\ f=v\circ S(f')
  \end{equation}
  を満たすとき，$(\r,v)$ を $S$ から $\c$ への普遍射 (universal arrow) という．
\end{definition}

\begin{definition}[普遍射-2]
  \def\c{\obj{c}}%
  \def\d{\obj{d}}%
  \def\r{\obj{r}}%
  函手 $\mrp{S}{\cat{D}}{\cat{C}}$ と対象 $\c\in\objs{\cat{C}}$ について，
  対象 $\r\in\objs{\cat{D}}$ と射 $\mrp{u}{S(r)}{\c}$ の組 $(\r,u)$ が
  \begin{equation}
    \forall\d\in\objs{\cat{D}}\ \forall f\in\mrps{\cat{C}}{S(d)}{\c}
    \ \exists!f'\in\mrps{\cat{D}}{\r}{\d};\ f=S(f')\circ u
  \end{equation}
  を満たすとき，$(\r,u)$ を $\c$ から $S$ への普遍射という．
\end{definition}

\section{極限と余極限}

\begin{definition}[終対象]
  圏 $\cat{C}$ および対象 $\obj{t}\in\objs{\cat{C}}$ が
  \begin{equation}
    \forall\obj{x}\in\objs{\cat{C}};\ |\mrps{\cat{C}}{\obj{x}}{\obj{t}}|=1
  \end{equation}
  を満たすとき，
  $\obj{t}$ を $\cat{C}$ の終対象 (terminal object) という．
\end{definition}

\begin{definition}[始対象]
  圏 $\cat{C}$ および対象 $\obj{i}\in\objs{\cat{C}}$ が
  \begin{equation}
    \forall\obj{x}\in\objs{\cat{C}};\ |\mrps{\cat{C}}{\obj{i}}{\obj{x}}|=1
  \end{equation}
  を満たすとき，
  $\obj{i}$ を $\cat{C}$ の始対象 (initial object) という．
\end{definition}

\begin{center}
  \includestandalone{src/terminal-and-initial-object}
\end{center}

\begin{definition}[定函手]
  圏 $\cat{C},\cat{D}$ および対象 $\obj{d}\in\objs{\cat{D}}$ について，
  $\cat{C}$ の任意の対象を $\obj{d}$ に写し，
  $\cat{C}$ の任意の射を $\id{\obj{d}}$ に写す函手を
  $\obj{d}$ の定函手 (constant functor) という．
\end{definition}

\begin{definition}[対角函手]
  圏 $\cat{C},\cat{D}$ について，
  任意の対象 $\obj{d}\in\objs{\cat{D}}$ を $\obj{d}$ の定函手に写す函手
  $\mrp{\Delta}{\cat{D}}{\cat{D}^{\cat{C}}}$ を対角函手 (diagonal functor) という．
  ただし $\Delta$ は射 $f\in\mrps{\cat{D}}{a}{b}$ を，
  任意のコンポーネントが $f$ であるような自然変換
  $\mrp{\Delta(f)}{\Delta(a)}{\Delta(b)}$ に写す．
\end{definition}

\begin{definition}[錐]
  圏 $\cat{C},\cat{D}$ および函手 $\mrp{F}{\cat{C}}{\cat{D}}$ について，
  対象 $\obj{d}\in\objs{\cat{D}}$ および自然変換 $\mrp{\psi}{\id{\obj{d}}}{F}$
  の組 $(\obj{d},\psi)$ を $F$ への錐 (cone) という．
\end{definition}

\begin{definition}[余錐]
  圏 $\cat{C},\cat{D}$ および函手 $\mrp{F}{\cat{C}}{\cat{D}}$ について，
  対象 $\obj{d}\in\objs{\cat{D}}$ および自然変換 $\mrp{\phi}{F}{\id{\obj{d}}}$
  の組 $(\obj{d},\phi)$ を $F$ からの余錐 (cocone) という．
\end{definition}

\begin{definition}[錐の圏]
  函手 $F$ への錐を対象とする圏を錐の圏といい，$\cone(F)$ と表記する．
  ただし射 $u\in\mrps{\cone(F)}{(\obj{d},\psi)}{(\obj{d'},\psi')}$ は
  以下の図式を可換にする自然変換 $\id{\obj{d}}\to\id{\obj{d'}}$ である．
  \begin{center}
    \includestandalone{src/cone-category}
  \end{center}
\end{definition}

\begin{definition}[余錐の圏]
  函手 $F$ からの余錐を対象とする圏を余錐の圏といい，$\cocone(F)$ と表記する．
  ただし射 $u\in\mrps{\cocone(F)}{(d,\phi)}{(d',\phi')}$ は
  以下の図式を可換にする自然変換 $\id{d}\to\id{d'}$ である．
  \begin{center}
    \includestandalone{src/cocone-category}
  \end{center}
\end{definition}

\begin{definition}[極限]
  $\cone(F)$ が終対象 $(\obj{t},\pi)$ をもつとき
  $\obj{t}$ を $F$ の極限 (limit) といい，
  $\obj{t}=\lim(F)$ と表記する．
\end{definition}

\begin{definition}[余極限]
  $\cocone(F)$ が始対象 $(\obj{i},\iota)$ をもつとき
  $\obj{i}$ を $F$ の余極限 (colimit) といい，
  $\obj{i}=\colim(F)$ と表記する．
\end{definition}

\section{さまざまな極限}

前節では非常に抽象的な形で極限と余極限を定義した．
本節ではさまざまな図式の極限と余極限を紹介し，
それらが具体的な圏においてどのような対象に対応するのかをみていく．

\subsection{終対象と始対象}

(余) 極限の定義に用いた終対象と始対象は，
実はそれぞれ最も単純な極限と余極限として記述できる．
\begin{theorem}[極限としての終対象]
  任意の圏 $\cat{C}$ および空圏 $\cat{J}$ について，
  自明な図式 $\cat{J}\to\cat{C}$ の極限は
  $\cat{C}$ の終対象に同型である．
\end{theorem}
\begin{theorem}[余極限としての始対象]
  任意の圏 $\cat{C}$ および空圏 $\cat{J}$ について，
  自明な図式 $\cat{J}\to\cat{C}$ の余極限は
  $\cat{C}$ の始対象に同型である．
\end{theorem}
終対象や始対象の具体的な例をみてみよう．
例えば集合圏 $\set$ における終対象と始対象は，それぞれ一点集合と空集合に対応する．
一点集合 $1=\{\cdot\}$ が終対象であることは，任意の集合 $S$ について，
$S$ から $1$ への写像が $S$ の全ての要素を集合 $1$ の唯一の要素に写す写像ただひとつであることからわかる．
空集合 $\emptyset$ が始対象であることについては，
やや無理があるかもしれないが，任意の集合 $S$ について
何もしない写像 $\emptyset\to S$ がただひとつ存在するのだと考えてほしい．

\subsection{積と余積}

\subsection{引き戻しと押し出し}

\begin{definition}[引き戻し]
  圏 $\cat{C}$ ，圏 $\cat{J}=(\rightarrow\cdot\leftarrow)$ および
  函手 $F:\cat{J}\to\cat{C}$ の極限を，
  引き戻し (pullback) またはファイバー積 (fiber product) という．
\end{definition}

\section{完備}

\begin{definition}[有限完備]
  圏 $\cat{C}$ について任意の有限圏 $\cat{J}$ および函手 $F:\cat{J}\to\cat{C}$
  が極限をもつとき，$\cat{C}$ は有限完備であるという．
\end{definition}

\begin{definition}[完備]
  圏 $\cat{C}$ について任意の小圏 $\cat{J}$ および函手 $F:\cat{J}\to\cat{C}$
  が極限をもつとき，$\cat{C}$ は完備であるという．
\end{definition}

\chapter{随伴}

\section{随伴函手の性質}

\begin{theorem}[随伴函手の並列定義]\label{thm:adjoint-functor-definitions}
  函手 $F:\cat{C}\rightleftarrows\cat{D}:G$ について以下の命題は全て同値である:
  \begin{enumerate}
    \item $F\dashv G$．
    \item 自然変換 $\eta:\id{\cat{C}}\to GF$ が存在し，
          各 $\eta_c:c\to GF(c)$ が $c$ から $G$ への普遍射である．
    \item 自然変換 $\epsilon:FG\to\id{\cat{D}}$ が存在し，
          各 $\epsilon_d:FG(d)\to d$ が $F$ から $d$ への普遍射である．
  \end{enumerate}
\end{theorem}

\begin{theorem}[並列定義の系]
  \begin{equation}
    -\times A\dashv{(-)}^A.
  \end{equation}
\end{theorem}

\begin{proof}
  \cref{thm:adjoint-functor-definitions} の (i) $\Leftrightarrow$ (iii) を用いる．
  評価射 $\epsilon_c:{C}^A\to C$ が
  (i) 対象 $C$ について自然であり，
  (ii) $-\times A$ から $C$ への普遍射であることを示す．

  \begin{enumerate}[label=(\roman*)] % chktex 36
    \item 自然性を示す．
          冪函手の定義より，任意の $C,D\in\objs{\cat{C}}$ と射 $f:C\to D$ について
          \begin{align*}
            f\circ\epsilon_C
             & =\epsilon_D\circ(\widetilde{(f\circ\epsilon_C)}\times\id{A}) \\
             & =\epsilon_D\circ(f^A\times\id{A})                            \\
          \end{align*}
          よって自然性は示された．
    \item 普遍性を示す．
          冪函手の定義より，任意の $X\in\objs{\cat{C}}$ と $g:X\times A\to C$
          について以下を満たす$\tilde{g}:X\to C^A$ がただ一つ存在する:
          \begin{equation*}
            \epsilon_C\circ(\tilde{g}\times\id{A})=g.
          \end{equation*}
          よって普遍性は示された．
  \end{enumerate}
\end{proof}

\chapter{カン拡張}

\epigraph{All Concepts are Kan Extensions.}{Saunders Mac Lane}

\section{カン拡張}

\begin{definition}[函手の誘導]
  \def\C{\cat{C}}%
  \def\A{\cat{C'}}%
  \def\D{\cat{D}}%
  \def\K{K}%
  \def\h{H}%
  函手 $\mrp{\K}{\C}{\A}$ および圏 $\D$ について，
  以下のように定義される函手 $\mrp{\K^*}{\D^\A}{\D^\C}$ を
  $\K$ と $\D$ によって誘導される函手という:
  \begin{align}
    \objs{\D^\A}\ni\h
     & \mapsto\h\circ\K\in\objs{\D^\C},                            \\
    \mrps{\D^\A}{\h}{\h'}\ni\sigma
     & \mapsto\sigma\circ\K\in\mrps{\D^\C}{\h\circ\K}{\h'\circ\K}.
  \end{align}
\end{definition}
\begin{definition}[左カン拡張]
  \def\C{\cat{C}}%
  \def\A{\cat{C'}}%
  \def\D{\cat{D}}%
  \def\K{K}%
  \def\L{\K_!}%
  函手 $\mrp{\K}{\C}{\A}$ および圏 $\D$ によって誘導される函手
  $\mrp{\K^*}{\D^\A}{\D^\C}$ が左随伴 $\mrp{\L}{\D^\C}{\D^\A}$ をもつとき，
  $\L$ を $\K$ に沿った左カン拡張 (left Kan extension) といい，
  $\L=\lan_{\K}$ と表記する．
\end{definition}
\begin{definition}[右カン拡張]
  \def\C{\cat{C}}%
  \def\A{\cat{C'}}%
  \def\D{\cat{D}}%
  \def\K{K}%
  \def\R{\K_*}%
  函手 $\mrp{\K}{\C}{\A}$ および圏 $\D$ によって誘導される函手
  $\mrp{\K^*}{\D^\A}{\D^\C}$ が右随伴 $\mrp{\R}{\D^\C}{\D^\A}$ をもつとき，
  $\R$ を $\K$ に沿った右カン拡張 (right Kan extension) といい，
  $\R=\ran_{\K}$ と表記する．
\end{definition}
\begin{center}
  \includestandalone{src/left-kan}
  \hspace{20pt}
  \includestandalone{src/right-kan}
\end{center}

\section{すべての概念はカン拡張である}

本節では，極限や随伴がカン拡張として表現されることを確認する．

\begin{theorem}[極限は右カン拡張である]\label{thm:limit-is-right-kan-extension}
  函手 $T:\cat{M}\to\cat{A}$ について以下の2つは同値である:
  \begin{itemize}
    \item $T$ が極限をもつ，
    \item $T$ が (一意的な) 函手 $K_1:\cat{M}\to\mathbf{1}$
          に沿った右カン拡張をもつ．
  \end{itemize}
  またこれらが成り立つとき $\lim T\simeq\ran_{K_1}T$．
\end{theorem}

\begin{proof}
  函手 $A:\mathbf{1}\to\cat{A}$ は $\cat{A}$ の対象であり，
  $A\circ K_1=\Delta(A)$ である．
  よって自然変換 $\alpha:A\circ K_1\to T$ は $T$ への錐 $(A,\alpha)$ をなす．
  右カン拡張 $(\ran_{K_1}T,\epsilon)$ も同様に $T$ への錐であり，
  その定義より極限錐に同型である．
\end{proof}

\begin{center}
  \begin{minipage}[b]{0.4\linewidth}
    \includestandalone{src/lim-right-kan-1}
  \end{minipage}
  \begin{minipage}[b]{0.4\linewidth}
    \includestandalone{src/lim-right-kan-2}
  \end{minipage}
\end{center}

\begin{theorem}[余極限は左カン拡張である]
  函手 $T:\cat{M}\to\cat{A}$ について以下の2つは同値である:
  \begin{itemize}
    \item $T$ が余極限をもつ，
    \item $T$ が (一意的な) 函手 $K_1:\cat{M}\to\mathbf{1}$
          に沿った左カン拡張をもつ．
  \end{itemize}
  またこれらが成り立つとき $\colim T\simeq\lan_{K_1}T$．
\end{theorem}

\begin{proof}
  \cref{thm:limit-is-right-kan-extension} より双対的に示される．
\end{proof}

\begin{center}
  \begin{minipage}[b]{0.4\linewidth}
    \includestandalone{src/colim-left-kan-1}
  \end{minipage}
  \begin{minipage}[b]{0.4\linewidth}
    \includestandalone{src/colim-left-kan-2}
  \end{minipage}
\end{center}

\chapter{圏論の応用}

\section{ストーンの双対性定理}

ストーンの双対性定理は，
(sober 性を満たす)
位相空間と
(空間的)
完備ハイティング代数が一対一に対応することを示す．
ふつう位相空間論は集合論の土台の上で定式化されるが，
この定理によって集合論ではなく束論に基づく位相空間論の定式化
(ポイントレス位相空間論)
が可能になる．

\subsection{ストーンの表現定理}

ストーンの表現定理は双対性定理の特別な場合である．
ストーンの双対性定理は位相空間と束の対応を与えるが，
ストーンの表現定理はそれらに制約を加えたストーン空間とブール代数の対応を与える．

\begin{definition}[ストーン空間の圏]
  ストーン空間
  (\cref{def:stone-space})
  と連続写像
  (\cref{def:continuous-map})
  のなす圏を $\stone$ と表記する．
\end{definition}

\begin{definition}[ブール代数の圏]
  ブール代数 (\cref{def:boolean-algebra})
  とブール準同型のなす圏を $\blat$ と表記する．
\end{definition}

\newcommand{\spec}{\operatorname{spec}}
\newcommand{\clop}{\operatorname{clop}}

\begin{theorem}[ストーンの表現定理]
  \begin{equation}
    \stone\simeq\blat^\mathrm{op}.
  \end{equation}
\end{theorem}

\begin{proof}
  反変函手 $\spec:\blat^\mathrm{op}\to\stone$ および
  $\clop:\stone^\mathrm{op}\to\blat$ を定め，自然同型
  $\eta:\id{\blat}\simeq\clop\circ(\spec^\mathrm{op})$ が存在することを示す．
  以下，メモ．
  \begin{itemize}
    \item $\spec(B)$: ブール準同型 $B\to2$ の全体
          \begin{itemize}
            \item 集合 $2$ に離散位相を入れて $2^B$ に積位相を入れた位相空間を
                  考えると，$\spec(B)\subseteq 2^B$ はその部分位相空間になる
          \end{itemize}
    \item $\spec(b:B'\to B)=b^{-1}:\spec(B)\to\spec(B')$
          \begin{itemize}
            \item $b^{-1}$ は $b$ の逆像を与える
          \end{itemize}
    \item 反変函手 $\clop:\stone^\mathrm{op}\to\blat$
          \begin{itemize}
            \item $\clop(X)$: $X$ の開かつ閉集合の全体
            \item 和集合および積集合を取る操作について閉じており，ブール代数となる
          \end{itemize}
    \item $\eta_B:B\ni b\mapsto\{v\in\spec(B)\mid v(b)=1\}\in\clop(\spec(B))$
  \end{itemize}
\end{proof}

\subsection{ストーンの双対性定理}

\begin{definition}[既約]
  以下の条件を満たす位相空間
  $(X,\mathcal{O})$
  を既約
  (irreducible)
  であるという．
  \begin{equation}
    \forall O_1,O_2\in\mathcal{O}\setminus\{\emptyset\};
    \ (X\setminus O_1)\cap(X\setminus O_2)\neq X
  \end{equation}
\end{definition}

\begin{definition}[sober 空間]
  既約位相空間
  $(X,\mathcal{O})$
  の任意の既約閉部分集合
  $A\subseteq X$
  について，
  $\{a\}$
  の閉包が
  $A$
  に等しくなるような
  $a\in A$
  がただ一つ存在するとき，
  $(X,\mathcal{O})$
  を sober 空間 (sober space) という．
\end{definition}

\begin{definition}[空間的完備ハイティング代数]
  完備
  (\cref{def:complete-lattice})
  なハイティング代数
  (\cref{def:heyting-algebra})
  $F$
  について，任意の
  $a,b\in F$
  に対して
  $a\le b$
  でないならば
  $f(a)=1\wedge f(b)=0$
  を満たす束準同型
  $f:F\to\{0,1\}$
  が存在するとき，
  $F$
  を空間的完備ハイティング代数
  (spatial complete Heyting algebra)
  という。
\end{definition}

\newcommand{\sob}{\mathbf{Sob}}
\newcommand{\sfrm}{\mathbf{SFrm}}

\begin{definition}[sober 空間の圏]
  sober 空間と連続写像のなす圏を $\sob$ と表記する．
\end{definition}

\begin{definition}[空間的完備ハイティング代数の圏]
  空間的完備ハイティング代数と束準同型のなす圏を $\sfrm$ と表記する．
\end{definition}

\begin{theorem}[ストーンの双対性定理]
  \begin{equation}
    \sob\simeq\sfrm^\mathrm{op}.
  \end{equation}
\end{theorem}

\appendix

\chapter{基礎論}

\begin{definition}[グロタンディーク宇宙]
  \def\U{U}%
  \def\x{x}%
  \def\y{y}%
  以下の性質をもつ集合 $\U$ を
  グロタンディーク宇宙 (Grothendieck universe) という．
  \begin{align}
     & \forall\x\in\U\ \forall\y\in\x;\ \x\in\U,              \\
     & \forall\x,\y\in\U;\ \{\x,\y\}\in\U,                    \\
     & \forall\x\in\U;\ 2^\x\in\U,                            \\
     & \forall I\in\U\ \forall{\{\x_i\}}_{i\in I}\subseteq\U;
    \ \bigcup_{i\in I}\x_i\in\U.
  \end{align}
\end{definition}

\begin{definition}[小さい集合]\label{def:small-set}
  グロタンディーク宇宙の元を小さい集合 (small set) という．
\end{definition}

\chapter{代数学の知識}

\section{束論}

ハイティング代数は半順序，交わりと結び，最大元と最小元，
相対擬補元をそなえた代数構造であり，
ブール代数は相対擬補元が補元に一致するハイティング代数である．
普通これらの構造は集合論の土台の上で定義されるが，
圏論の概念を用いて定義することもできる．
例えば交わりと結びは積と余積として，最大元と最小限は終対象と始対象として,
相対擬補元は冪として表現することができる．

\begin{definition}[半順序集合]
  圏 $\cat{C}$ について
  \begin{equation}
    \forall x,y\in\objs{\cat{C}};|\mrps{\cat{C}}{x}{y}|\le1
  \end{equation}
  が成り立つとき，
  $\cat{C}$ は半順序集合 (partially ordered set, poset)
  であるという．
\end{definition}

\begin{definition}[束]
  半順序集合 $\cat{C}$ が
  有限積と有限余積をもつとき，
  $\cat{C}$ は束 (lattice) であるという．
\end{definition}

\begin{definition}[完備束]\label{def:complete-lattice}%
  任意の部分集合が下限と上限をもつような半順序集合を
  完備束
  (complete lattice)
  という．
\end{definition}

\begin{definition}[有界束]
  束 $\cat{C}$ が終対象と始対象をもつとき，
  $\cat{C}$ は有界束 (bounded lattice) であるという．
\end{definition}

\begin{definition}[ハイティング代数]\label{def:heyting-algebra}%
  有界束 $\cat{C}$ が任意の対象の組について冪をもつとき,
  $\cat{C}$ はハイティング代数 (Heyting algebra) であるという．
\end{definition}

\begin{theorem}
  任意の位相空間 (\cref{def:topological-space})
  の位相は完備ハイティング代数である．
\end{theorem}

\begin{definition}[ブール代数]\label{def:boolean-algebra}
  ハイティング代数 $\cat{C}$ について
  \begin{equation}
    \forall x\in\objs{\cat{C}};\ \neg\neg x=x
  \end{equation}
  が成り立つとき，
  $\cat{C}$ は ブール代数 (Boolean algebra) であるという．
\end{definition}

\chapter{位相幾何学の知識}

\section{位相空間論}

\begin{definition}[位相空間]\label{def:topological-space}
  集合 $X$ とその部分集合族 $\mathcal{O}\subseteq2^X$ が以下の条件を満たすとき,
  $(X,\mathcal{O})$ は位相空間 (topological space) であるという．
  \begin{align}
    \emptyset,X\in\mathcal{O}                                 \\
    \forall O_1,O_2\in\mathcal{O};\ O_1\cup O_2\in\mathcal{O} \\
    \forall \mathcal{O}'\subseteq\mathcal{O};
    \bigcup_{O\in\mathcal{O}'}O\in\mathcal{O}
  \end{align}
\end{definition}

\begin{definition}[開集合，閉集合，開かつ閉集合]
  位相空間 $(X,\mathcal{O})$ について，
  $\mathcal{O}$ の元を $X$ の開集合 (open set) という．
  また部分集合 $S\subseteq X$ が
  \begin{equation}
    \exists O\in\mathcal{O};\ S=X\setminus O
  \end{equation}
  を満たすとき，
  $S$ は $X$ の閉集合 (closed set) であるという．

  $X$ の開集合でありかつ $X$ の閉集合である集合を
  $X$ の開かつ閉集合 (closed-open set, clopen set) という．
\end{definition}

\begin{definition}[連続写像]\label{def:continuous-map}
  位相空間 $(X,\mathcal{O}_X)$ と $(Y,\mathcal{O}_Y)$ および写像 $f:X\to Y$ が
  \begin{equation}
    \forall O\in\mathcal{O}_Y;\ f^{-1}(O)\in\mathcal{O}_X
  \end{equation}
  を満たすとき,
  $f$ は連続写像 (continuous map) であるという．
\end{definition}

\begin{definition}[被覆，開被覆，部分被覆，有限部分被覆]
  位相空間 $(X,\mathcal{O})$ の部分集合族 $\mathcal{C}\subseteq2^X$ について
  \begin{equation}
    X\subset\bigcup_{C\in\mathcal{C}}C
  \end{equation}
  が成り立つとき,
  $\mathcal{C}$ は $X$ の被覆 (cover) であるという．
  さらに $\mathcal{C}\subseteq\mathcal{O}$ であるとき，
  $\mathcal{C}$ は $X$ の開被覆 (open cover) であるという．

  また，
  $X$ の被覆 $\mathcal{C}_0\subseteq\mathcal{C}$ を
  $\mathcal{C}$ の部分被覆 (subcover) といい，
  さらに $\mathcal{C}_0$ が有限集合であるとき
  $\mathcal{C}_0$ は $\mathcal{C}$ の有限部分被覆 (finite subcover) であるという．
\end{definition}

\begin{definition}[コンパクト集合]
  位相空間 $(X,\mathcal{O})$ の部分集合 $A\subseteq X$ の
  任意の開被覆が有限部分被覆をもつとき，
  $A$ はコンパクト集合 (compact set) であるという．
\end{definition}

\begin{definition}[コンパクト空間]
  位相空間 $(X,\mathcal{O})$ について $X$ がコンパクト集合であるとき,
  $(X,\mathcal{O})$ はコンパクト空間 (compact space) であるという．
\end{definition}

\begin{example}[$\mathbb{R}$ はコンパクト空間でない]
  通常の位相をもつ
  $\mathbb{R}$
  の開被覆
  $\{(n,n+2)\mid n\in\mathbb{Z}\}$
  は有限部分被覆をもたないため，
  $\mathbb{R}$
  はコンパクト空間でない．
\end{example}

\begin{definition}[連結，不連結]
  位相空間 $(X,\mathcal{O})$ の部分集合 $A\subseteq X$ が
  \begin{equation}
    \exists O_1,O_2\in\mathcal{O}\setminus\{\emptyset\};
    \ O_1\cup O_2=A\wedge O_1\cap O_2=\emptyset
  \end{equation}
  を満たすとき $A$ は不連結 (disconnected) であるといい，
  不連結でない $X$ の部分集合は連結 (connected) であるという．
\end{definition}

\begin{definition}[連結成分]
  位相空間の極大な連結部分集合を，
  その位相空間の連結成分 (connected component) という．
\end{definition}

\begin{definition}[完全不連結]
  任意の連結成分が一点集合であるような位相空間を
  完全不連結 (disconnected) であるという．
\end{definition}

\begin{definition}[ハウスドルフ空間]
  以下の条件を満たす位相空間 $(X,\mathcal{O})$ を
  ハウスドルフ空間 (Hausdorff space) という．
  \begin{equation}
    \forall x,y\in X;
    \ \left[x\neq y\Longrightarrow\exists O_1,O_2\in\mathcal{O};
      \ x\in O_1\wedge y\in O_2\wedge O_1\cap O_2=\emptyset\right].
  \end{equation}
\end{definition}

\begin{definition}[ストーン空間]\label{def:stone-space}
  コンパクト完全不連結ハウスドルフ空間をストーン空間 (Stone space) という．
\end{definition}

\end{document}
